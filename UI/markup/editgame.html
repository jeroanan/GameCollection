{#
Copyright (c) 2015 David Wilson
This file is part of Icarus.

Icarus is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Icarus is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Icarus.  If not, see <http://www.gnu.org/licenses/>.
#}

{% extends 'master.html' %}
{% block content %}

{% include 'status.html' %}
<h1>{{title}}</h1>

{% if game_found %}

<form class="form-horizontal" method="post" role="form" action="updategame">
  
  <div class="row">

	 {{ column('5', text_field('title', 'Title', game.title)) }}
	 
	 {{ column('2') }}

	 <div class="col-sm-5">

      <div class="form-group">
        <label for="platform">Platform</label>
        <select name="platform" id="platform" required="required" class="form-control">
          {% for platform in platforms %}
          {% if platform.name==game.platform %}
          <option value="{{platform.name}}" selected="selected">{{platform.name}}</option>
          {% else %}
          <option value="{{platform.name}}">{{platform.name}}</option>
          {% endif %}
          {% endfor %}
        </select>

      </div>
	 </div>
  </div>
  
  <div class="row">

	 {{ column('2', number_field('numcopies', 'Number of Copies', game.num_copies)) }}	 
	 {{ column('1') }}
	 {{ column('2', number_field('numboxed', 'Boxes', game.num_boxed)) }}	 
	 {{ column('1') }}	 	 
	 {{ column('2', number_field('nummanuals', 'Manuals', game.num_manuals)) }}	 	 
	 {{ column('1') }}
    
	 <div class="col-sm-2">
		<div class="form-group">
        <label for="datepurchased">Date Purchased</label>
        <input id="datepurchased" name="datepurchased" type="text" class="picker form-control" value="{{game.date_purchased}}"/>
        <div class="checkbox"><label>
            {% if game.approximate_date_purchased %}
            <input name="approximatepurchaseddate" id="approximatepurchaseddate"
                   type="checkbox" checked="checked" />
            {% else %}
            <input name="approximatepurchaseddate" id="approximatepurchaseddate" type="checkbox"  />
            {% endif %}
            Approximate date</label></div>
		</div>
	 </div>
  </div>
  
  <div class="row">
	 <div class="col-sm-4">
		<div class="form-group">
		  <label for="genre">Genre</label>
		  <select name="genre" id="genre" class="form-control">
			 <option value="" />
			 {% for genre in genres %}
			 {% if genre.name == game.genre %}
			 <option value="{{genre.name}}" selected="selected">{{genre.name}}</option>
			 {% else %}
			 <option value="{{genre.name}}">{{genre.name}}</option>
			 {% endif %}
			 {% endfor %}
		  </select>
		</div>
	 </div>
  </div>
  
  {{ row([column('12', notes(game.notes))]) }}
  
  <input type="hidden" id="id" name="id" value="{{game.id}}" />

  <div class="row">
	 <div class="col-sm-1">
      <input type="button" class="btn btn-primary" value="Save" onclick="updateGame();" />
	 </div>
	 <div class="col-sm-1">
      <input type="button" class="btn" value="Cancel" onclick="cancelEdit()" />
	 </div>
	 <div class="col-sm-9"></div>
	 <div class="col-sm-1">
      <input type="button" class="btn btn-danger" value="Delete" onclick="showDeleteConfirm()"/>
	 </div>
  </div>
</form>
<div style="display: none;" class="text-danger" id="deleteConfirm">
  <span>Really delete this game?</span>
  <a href="javascript:deleteGame()">Yes</a>&nbsp;|&nbsp;<a href="javascript:hideDeleteConfirm()">No</a>
</div>

{% endif %}
{% endblock %}
