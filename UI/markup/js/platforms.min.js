var Platforms=function(a,b){this.ajax=a,this.urls=b};Platforms.prototype.addPlatform=function(a,b){var c=$.Deferred(),d=this.ajax||new Ajax,e={name:a,description:b},f=this.ajax.validateNameDescription(e);return"fail"===f.result?c.reject(f.fields):d.addNameDescription(urls.addplatform,a,b).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},Platforms.prototype.addNewPlatform=function(){var a=$.Deferred(),b={name:$("#name").val(),description:$("#description").val()},c=this.ajax.validateNameDescription(b);return"fail"===c.result?a.reject({fields:c.fields}):this.ajax.addNewNameDescription(this.addPlatform).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},Platforms.prototype.deletePlatform=function(){var a=$.Deferred();return this.ajax.ajaxDelete(urls.deleteplatform,this.ajax.getIdJson()).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},Platforms.prototype.updatePlatform=function(){var a=$.Deferred();return this.ajax.updateNameDescription(urls.updateplatform).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},$(function(){var a=new Ajax,b=new Platforms(a,urls),c=function(b){var c="";for(var d in b)c=a.appendText(c,"Please enter a platform "+b[d]);a.showValidationFailure(c)},d=function(a,b){a.after('<img class="'+b+'" src="/static/images/wait.gif" />')};$("input.addnewplatform").on("click",function(e){var f=$("form.new-platform-form").find("input"),g=$("input.addnewplatform");e.preventDefault(),d(g,"new-platform-loading-gif"),f.attr("disabled","true"),a.hideValidationFailure(),b.addNewPlatform().done(function(){document.location.reload()}).fail(function(a){a.fields&&c(a.fields)}).always(function(){$(".new-platform-loading-gif").remove(),f.removeAttr("disabled")})}),$("button.addsuggestedplatform").on("click",function(a){var c=a.currentTarget.attributes["data-index"].value,e=$("td.suggestedplatformname-"+c).text(),f=$("td.suggestedplatformdescription-"+c).text(),g=$("button.addsuggestedplatform-"+c),h="suggested-platform-loading-gif";return a.preventDefault(),d(g,h),g.attr("disabled","true"),b.addPlatform(e,f).done(function(){document.location.reload()}).always(function(){$("."+h).remove(),g.removeAttr("disabled")}),!1}),$("input.saveButton").on("click",function(e){var f=$(".saveButton"),g="save-platform-loading-gif",h=$("form").find("input");return e.preventDefault(),a.hideValidationFailure(),d(f,g),h.attr("disabled","true"),b.updatePlatform().done(function(){document.location=urls.platforms}).fail(function(a){a.fields&&c(a.fields)}).always(function(){$("."+g).remove(),h.removeAttr("disabled")}),!1}),$("a.yesDelete").on("click",function(a){var c=$("form").find("input"),e=$("a.yesDelete"),f="delete-platform-loading-gif";return a.preventDefault(),d(e,f),c.attr("disabled","true"),b.deletePlatform().done(function(){document.location=urls.platforms}).always(function(){$("."+f).remove(),c.removeAttr("disabled")}),!1}),"/editplatform"===document.location.pathname&&$("#name").focus()});
//# sourceMappingURL=script.min.js.map