var Platforms=function(a,b){this.ajax=a,this.urls=b};Platforms.prototype.addPlatform=function(a,b){var c=$.Deferred(),d=this.ajax||new Ajax,e={name:a,description:b},f=this.ajax.validateNameDescription(e);return"fail"===f.result?c.reject(f.fields):d.addNameDescription(urls.addplatform,a,b).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},Platforms.prototype.addNewPlatform=function(){var a=$.Deferred(),b={name:$("#name").val(),description:$("#description").val()},c=this.ajax.validateNameDescription(b);return"fail"===c.result?a.reject(c.fields):this.ajax.addNewNameDescription(this.addPlatform).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},Platforms.prototype.deletePlatform=function(){var a=$.Deferred();return this.ajax.ajaxDelete(urls.deleteplatform,this.ajax.getIdJson()).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},Platforms.prototype.updatePlatform=function(){var a=$.Deferred();return this.ajax.updateNameDescription(urls.updateplatform).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},$(function(){var a=new Ajax,b=new Platforms(a,urls);$("button.addnewplatform").on("click",function(a){a.preventDefault(),b.addNewPlatform().done(function(){document.location.reload()}).fail(function(a){console.log(a)})}),$("button.addsuggestedplatform").on("click",function(a){a.preventDefault();var c=a.currentTarget.attributes["data-index"].value,d=$("td.suggestedplatformname-"+c).text(),e=$("td.suggestedplatformdescription-"+c).text();return b.addPlatform(d,e).done(function(){document.location.reload()}).fail(function(a){console.log(a)}),!1}),$("input.saveButton").on("click",function(c){return c.preventDefault(),a.hideValidationFailure(),b.updatePlatform().done(function(){document.location="/platforms"}).fail(function(b){if(b.fields){var c="";for(var d in b.fields)c=a.appendText(c,"Please enter a platform "+b.fields[d]);a.showValidationFailure(c)}}),!1}),$("a.yesDelete").on("click",function(a){return a.preventDefault(),b.deletePlatform().done(function(){document.location="/platforms"}),!1})});
//# sourceMappingURL=script.min.js.map