var Platforms=function(a,b){this.ajax=a,this.urls=b};Platforms.prototype.addPlatform=function(a,b){var c=$.Deferred(),d=this.ajax||new Ajax,e={name:a,description:b},f=this.ajax.validateNameDescription(e);return"fail"===f.result?c.reject(f.fields):d.addNameDescription(urls.addplatform,a,b).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},Platforms.prototype.addNewPlatform=function(){var a=$.Deferred(),b={name:$("#name").val(),description:$("#description").val()},c=this.ajax.validateNameDescription(b);return"fail"===c.result?a.reject({fields:c.fields}):this.ajax.addNewNameDescription(this.addPlatform).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},Platforms.prototype.deletePlatform=function(){var a=$.Deferred();return this.ajax.ajaxDelete(urls.deleteplatform,this.ajax.getIdJson()).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},Platforms.prototype.updatePlatform=function(){var a=$.Deferred();return this.ajax.updateNameDescription(urls.updateplatform).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},$(function(){var a=new Ajax,b=new Platforms(a,urls);$("input.addnewplatform").on("click",function(c){var d=$("form.new-platform-form").find("input"),e=$("input.addnewplatform"),f="new-platform-loading-gif",g=$("input");c.preventDefault(),doLoading(e,f,g),a.hideValidationFailure(),b.addNewPlatform().done(function(){document.location.reload()}).fail(function(a){a.fields&&showFailure(a.fields,"platform")}).always(function(){$("."+f).remove(),d.removeAttr("disabled")})}),$("button.addsuggestedplatform").on("click",function(a){var c=a.currentTarget.attributes["data-index"].value,d=$("td.suggestedplatformname-"+c).text(),e=$("td.suggestedplatformdescription-"+c).text(),f=$("button.addsuggestedplatform-"+c),g="suggested-platform-loading-gif";return a.preventDefault(),doLoading(f,g),f.attr("disabled","true"),b.addPlatform(d,e).done(function(){document.location.reload()}).always(function(){$("."+g).remove(),f.removeAttr("disabled")}),!1}),$("input.saveButton").on("click",function(c){var d=$(".saveButton"),e="save-platform-loading-gif",f=$("form").find("input");return c.preventDefault(),a.hideValidationFailure(),doLoading(d,e,f),b.updatePlatform().done(function(){document.location=urls.platforms}).fail(function(a){a.fields&&showFailure(a.fields)}).always(function(){$("."+e).remove(),f.removeAttr("disabled")}),!1}),$("a.yesDelete").on("click",function(a){var b=$("form").find("input"),c=$("a.yesDelete"),d="delete-platform-loading-gif";return a.preventDefault(),doLoading(c,d,b),!1}),"/editplatform"===document.location.pathname&&$("#name").focus()});
//# sourceMappingURL=script.min.js.map