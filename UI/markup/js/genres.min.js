var Genres=function(a,b){this.ajaxFunctions=a,this.urls=b};Genres.prototype.addGenre=function(a,b){var c=$.Deferred(),d=this.ajaxFunctions||new Ajax,e={name:a,description:b},f=d.validateNameDescription(e);return"fail"===f.result?c.reject(f.fields):d.addNameDescription(this.urls.addgenre,a,b).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},Genres.prototype.addNewGenre=function(){var a=$.Deferred(),b={name:$("#name").val(),description:$("#description").val()},c=this.ajaxFunctions.validateNameDescription(b);return"fail"===c.result?a.reject({fields:c.fields}):this.ajaxFunctions.addNewNameDescription(this.addGenre).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},Genres.prototype.deleteGenre=function(){var a=$.Deferred();return this.ajaxFunctions.ajaxDelete(this.urls.deletegenre,this.ajaxFunctions.getIdJson()).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},Genres.prototype.updateGenre=function(){var a=$.Deferred(),b=this.ajaxFunctions||new Ajax;return b.updateNameDescription(urls.updategenre).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},$(function(){var a=new Ajax,b=new Genres(a,urls);$(".addnewgenre").on("click",function(a){var c=$(".addnewgenre"),d="add-new-genre-lonading-gif",e=$("input");return a.preventDefault(),doLoading(c,d,e),b.addNewGenre().done(function(){document.location.reload()}).fail(function(a){a.fields&&showFailure(a.fields,"genre")}).always(function(){finishedLoading(d,e)}),!1}),$("a.yesDelete").on("click",function(a){var c=$("a.yesDelete"),d="delete-genre-loading-gif",e=$("input");return a.preventDefault(),doLoading(c,d,e),b.deleteGenre().done(function(){document.location=urls.genres}).always(function(){finishedLoading(d,e)}),!1}),$("button.addSuggestedGenre").on("click",function(a){var c=a.currentTarget.attributes["data-index"].value,d=$("td.genreName-"+c).text(),e=$("td.genreDescription-"+c).text(),f=$("button.addSuggestedGenre-"+c),g="add-suggested-genre-loading-gif-"+c;return doLoading(f,g),f.attr("disabled","true"),b.addGenre(d,e).done(function(){document.location.reload()}).always(function(){finishedLoading(g,f)}),!1}),$("input.saveButton").on("click",function(a){a.preventDefault(),hideValidationFailure();var c=$("input.saveButton"),d="save-button-loading-gif",e=$("input");doLoading(c,d,e),b.updateGenre().done(function(){document.location=urls.genres}).fail(function(a){a.fields&&showFailure(a.fields,"genre")}).always(function(a){finishedLoading(d,e)})}),"/editgenre"===document.location.pathname&&$("#name").focus()});
//# sourceMappingURL=script.min.js.map