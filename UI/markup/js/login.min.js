var Login=function(a,b){this.ajax=a,this.urls=b};Login.prototype.login=function(){return this.ajax.hideValidationMessages(),this.loginPageAjax("/signin")},Login.prototype.loginDone=function(a){"ok"===a.result?(this.ajax.showValidationSuccess("Login successful."),this.ajax.setLoginText()):"failed"===a.result&&"failed_validation"===a.message?this.ajax.showValidationFailure("Please enter user id and password."):"failed"===a.result&&"invalid"===a.message?this.ajax.showValidationFailure("Invalid user id or password."):this.ajax.showValidationFailure("Error while logging in.")},Login.prototype.newUser=function(){return this.ajax.hideValidationMessages(),this.loginPageAjax("/signup")},Login.prototype.newUserDone=function(a){a!==!1&&("True"==a?(this.ajax.showValidationSuccess("Signed up successfully"),this.ajax.setLoginText()):this.ajax.showValidationFailure("Error encountered while signing up"))},Login.prototype.loginPageAjax=function(a){if(!this.validateLoginForm()){var b=new $.Deferxred;return b.resolve(JSON.stringify({result:"failed",message:"failed_validation"})),b}var c={userid:$("#userid").val(),password:$("#password").val()};return this.ajax.sendAjax(a,c)},Login.prototype.validateLoginForm=function(){var a="";return""===$("#userid").val()&&(a="Please enter a user id"),""===$("#password").val()&&(a=this.ajax.appendText(a,"Please enter a password")),""!==a&&this.ajax.showValidationFailure(a),""===a},$(function(){var a=new Login(new Ajax,urls);$("#login").on("click",function(b){return b.preventDefault(),a.login().done(function(b){var c=JSON.parse(b);a.loginDone(c),"ok"==c.result&&(document.location="/")}),!1}),$("#newuser").on("click",function(b){b.preventDefault(),a.newUser().done(function(a){newUserDone(a),"ok"===a&&setTimeout(function(){document.location="/"},2e3)})}),"/login"===document.location.pathname&&$("#userid").focus()});
//# sourceMappingURL=script.min.js.map