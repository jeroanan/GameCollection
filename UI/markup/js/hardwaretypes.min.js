var HardwareTypes=function(a,b){this.ajax=a,this.urls=b};HardwareTypes.prototype.deleteHardwareType=function(){var a=$.Deferred();return this.ajax.ajaxDelete(urls.deletehardwaretype,this.ajax.getIdJson()).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},HardwareTypes.prototype.addHardwareType=function(a,b){var c=$.Deferred(),d=this.ajax||new Ajax;return d.addNameDescription(urls.addhardwaretype,a,b).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},HardwareTypes.prototype.addNewHardwareType=function(){var a=$.Deferred(),b={name:$("#name").val(),description:$("#description").val()},c=this.ajax.validateNameDescription(b);return"fail"===c.result?(a.reject({fields:c.fields}),a):(this.ajax.addNewNameDescription(this.addHardwareType).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a)},HardwareTypes.prototype.updateHardwareType=function(){var a=$.Deferred();return this.ajax.updateNameDescription(urls.updatehardwaretype).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},$(function(){var a=new Ajax,b=new HardwareTypes(a,urls),c="hardware type",d=function(b){b.fields?showFailure(b.fields,c):a.showValidationFailure("Internal error while saving")},e=function(b){"ok"===b?document.location=urls.hardwaretypes:"already_exists"===b?a.showValidationFailure("A hardware type with this name already exists."):"validation_failed"===b?a.showValidationFailure("Please enter a hardware type name and description."):a.showValidationFailure("An error occurred while adding the hardware type.")};$("button.addnewhardwaretype").on("click",function(a){var c=$("button.addnewhardwaretype"),f="add-new-hardware-type-loading-gif",g=$("input");return a.preventDefault(),doLoading(c,f,g),b.addNewHardwareType().done(function(a){var b=JSON.parse(a);b.result&&e(b.result)}).fail(function(a){d(a)}).always(function(){finishedLoading(f,g)}),!1}),$("a.yesDelete").on("click",function(a){var c=$("a.yesDelete"),d="delete-hardware-type-loading-gif",f=$("input");return a.preventDefault(),doLoading(c,d,f),b.deleteHardwareType().done(function(a){var b=JSON.parse(a);b.result&&e(b.result)}).always(function(){finishedLoading(d,f)}),!1}),$("input.saveButton").on("click",function(a){var c=$("input.saveButton"),f="save-hardware-type-loading-gif",g=$("input");return a.preventDefault(),doLoading(c,f,g),b.updateHardwareType().done(function(a){var b=JSON.parse(a);b.result&&e(b.result)}).fail(function(a){d(a)}).always(function(a){finishedLoading(f,g)}),!1}),$("button.addsuggestedhardwaretype").on("click",function(a){var c=a.currentTarget.attributes["data-index"].value,d=$("td.hardwareTypeName-"+c).text(),f=$("td.hardwareTypeDescription-"+c).text(),g=$("button.addsuggestedhardwaretype-"+c),h="add-suggested-hardware-loading-gif-"+c;return a.preventDefault(),doLoading(g,h),g.attr("disabled","true"),b.addHardwareType(d,f).done(function(a){json_result=JSON.parse(a),json_result.result&&e(json_result.result)}).always(function(){finishedLoading(h),g.removeAttr("disabled")}),!1})});
//# sourceMappingURL=script.min.js.map