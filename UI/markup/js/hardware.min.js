var Hardware=function(a,b){this.ajax=a,this.urls=b};Hardware.prototype.getHardwareNoId=function(){return{name:$("#name").val(),platform:$("#platform").val(),numcopies:$("#numcopies").val(),numboxed:$("#numboxed").val(),notes:$("#notes").val(),hardwaretype:$("#hardwaretype").val()}},Hardware.prototype.deleteHardware=function(){var a=$.Deferred();return this.ajax.ajaxDelete(urls.deletehardware,this.ajax.getIdJson()).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},Hardware.prototype.addHardware=function(){var a=$.Deferred(),b=this.getHardwareNoId();return this.validateSaveHardware(b)?this.ajax.ajaxSave(urls.savehardware,b).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}):a.reject(),a},Hardware.prototype.updateHardware=function(){var a=$.Deferred(),b=this.getHardwareNoId();return b.id=this.ajax.getIdJson().id,this.validateSaveHardware(b)?this.ajax.ajaxSave(urls.updatehardware,b).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}):a.reject(),a},Hardware.prototype.validateSaveHardware=function(a){this.ajax.hideValidationFailure();var b="";""===a.name&&(b="Please enter a name"),""===a.numowned&&(b=this.ajax.appendText(b,"Please enter number owned")),""===a.numboxed&&(b=this.ajax.appendText(b,"Please enter number boxed"));var c=""===b;return c||this.ajax.showValidationFailure(b),c},Hardware.prototype.sortHardware=function(a){var b=$("#hwsortfield"),c=$("#hwsortdir"),d=$("#gamerows"),e=c.val(),f="asc",g=null===d.val()?999999:d.val();b.val()==a&&(f=toggleSortDirection(e)),b.val(a),c.val(f);var h={field:a,sortdir:f,numrows:g};this.ajax.loadAjax("#hardware",urls.sorthardware,h,this.initSorting)},Hardware.prototype.initSorting=function(a,b){"1"!==b&&(a=new Hardware(new Ajax,urls)),$("a.sorthardwarename").on("click",function(b){a.sortHardware("name")}),$("a.sorthardwareplatform").on("click",function(b){a.sortHardware("platform")}),$("a.sorthardwarenumowned").on("click",function(b){a.sortHardware("numowned")})},$(function(){var a=new Hardware(new Ajax,urls);a.initSorting(a,"1"),$("input.saveButton").on("click",function(){document.location.pathname===urls.edithardware&&a.updateHardware().done(function(){document.location=urls.allhardware}),document.location.pathname===urls.addhardware&&a.addHardware().done(function(){document.location=urls.allhardware})}),$("a.yesDelete").on("click",function(b){return b.preventDefault(),a.deleteHardware().done(function(){document.location=urls.allhardware}),!1})});
//# sourceMappingURL=script.min.js.map