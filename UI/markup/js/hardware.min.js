var Hardware=function(a,b){this.ajax=a,this.urls=b};Hardware.prototype.getHardwareNoId=function(){return{name:$("#name").val(),platform:$("#platform").val(),numcopies:$("#numcopies").val(),numboxed:$("#numboxed").val(),notes:$("#notes").val(),hardwaretype:$("#hardwaretype").val()}},Hardware.prototype.deleteHardware=function(){var a=$.Deferred();return this.ajax.ajaxDelete(urls.deletehardware,this.ajax.getIdJson()).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},Hardware.prototype.addHardware=function(a,b){var c=$.Deferred(),d=a.getHardwareNoId(),e=a.validateSaveHardwareJson(d);return"fail"===e.result?(c.reject({fields:e.fields}),c):(b.ajaxSave(urls.savehardware,d).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c)},Hardware.prototype.updateHardware=function(a,b){var c=$.Deferred(),d=a.getHardwareNoId();d.id=b.getIdJson().id;var e=a.validateSaveHardwareJson(d);return"fail"===e.result?(c.reject({fields:e.fields}),c):(b.ajaxSave(urls.updatehardware,d).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c)},Hardware.prototype.validateSaveHardware=function(a){this.ajax.hideValidationFailure();var b="";""===a.name&&(b="Please enter a name"),""===a.numowned&&(b=this.ajax.appendText(b,"Please enter number owned")),""===a.numboxed&&(b=this.ajax.appendText(b,"Please enter number boxed"));var c=""===b;return c||this.ajax.showValidationFailure(b),c},Hardware.prototype.validateSaveHardwareJson=function(a){var b=["name","numowned","numboxed"],c=b.filter(function(b){return""===a[b]});return{result:0===c.length?"success":"fail",fields:c}},Hardware.prototype.sortHardware=function(a){var b=$("#hwsortfield"),c=$("#hwsortdir"),d=$("#gamerows"),e=c.val(),f="asc",g=null===d.val()?999999:d.val();b.val()==a&&(f=toggleSortDirection(e)),b.val(a),c.val(f);var h={field:a,sortdir:f,numrows:g};this.ajax.loadAjax("#hardware",urls.sorthardware,h,this.initSorting)},Hardware.prototype.initSorting=function(a,b){"1"!==b&&(a=new Hardware(new Ajax,urls)),$("a.sorthardwarename").on("click",function(b){a.sortHardware("name")}),$("a.sorthardwareplatform").on("click",function(b){a.sortHardware("platform")}),$("a.sorthardwarenumowned").on("click",function(b){a.sortHardware("numowned")})},$(function(){var a=new Ajax,b=new Hardware(a,urls);b.initSorting(b,"1"),$("input.saveButton").on("click",function(c){var d=function(){return document.location.pathname===urls.edithardware?b.updateHardware:document.location.pathname===urls.addhardware?b.addHardware:void 0},e=d(),f=$("input.saveButton"),g="save-hardware-loading-gif",h=$("input, select, textarea");doLoading(f,g,h),c.preventDefault(),e(b,a).done(function(){document.location=urls.allhardware}).fail(function(a){a.fields&&showFailure(a.fields,"hardware")}).always(function(){finishedLoading(g,h)})}),$("a.yesDelete").on("click",function(a){var c=$("a.yesDelete"),d="delete-hardware-loading-gif",e=$("input, select, textarea");return a.preventDefault(),doLoading(c,d,e),b.deleteHardware().done(function(){document.location=urls.allhardware}).always(function(){finishedLoading(d,e)}),!1})});
//# sourceMappingURL=script.min.js.map