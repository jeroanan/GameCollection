function cancelEdit(){window.history.back()}function cancelEditPlatform(){navigate("/platforms")}function cancelEditHardwareType(){navigate("/hardwaretypes")}function showDeleteConfirm(){$("#deleteConfirm").fadeIn()}function hideDeleteConfirm(){$("#deleteConfirm").fadeOut()}function deleteHardwareType(){var a={id:$("#id").val()};ajaxDelete("/deletehardwaretype",a,"/hardwaretypes")}function deleteGame(){var a={id:$("#id").val()};ajaxDelete("/deletegame",a)}function deletePlatform(){var a={platformid:$("#id").val()};ajaxDelete("/deleteplatform",a)}function ajaxDelete(a,b,c){function d(){showValidationSuccess("Deletion successful"),setTimeout(function(){hideValidationSuccess(),c&&navigate(c)},3e3)}function e(){showValidationFailure("Deletion failed")}$.ajax({url:a,data:b,success:d,error:e})}function deleteHardware(){navigate("/deletehardware?hardwareid="+$("#id").val())}function editGame(a){navigate("/editgame?gameid="+a)}function editHardware(a){navigate("/edithardware?hardwareid="+a)}function editPlatform(a){navigate("/editplatform?platformid="+a)}function addNewPlatform(){addNewNameDescription(addPlatform)}function addPlatform(a,b){addNameDescription("/addplatform",a,b)}function addNewGenre(){addNewNameDescription(addGenre)}function addHardwareType(a,b){addNameDescription("/addhardwaretype",a,b)}function addNewHardwareType(){addNewNameDescription(addHardwareType)}function editHardwareType(a){navigate("/edithardwaretype?id="+a)}function addGenre(a,b){addNameDescription("/addgenre",a,b)}function addNewNameDescription(a){a($("#name").val(),$("#description").val())}function addNameDescription(a,b,c){$.ajax({url:a,data:{name:b,description:c}}).always(function(){document.location.reload()})}function editGenre(a){navigate("/editgenre?genreid="+a)}function deleteGenre(a){j={id:a},ajaxDelete("/deletegenre",j)}function deleteUser(a){j={id:a},ajaxDelete("/deleteuser",j)}function navigate(a){window.location=a}function updateGame(){var a=getGameNoId();console.log(a.genre),a.id=$("#id").val(),validateSaveGame(a)&&ajaxSave("/updategame",a)}function saveGame(){var a=getGameNoId();validateSaveGame(a)&&ajaxSave("/savegame",a)}function getGameNoId(){return{title:$("#title").val(),genre:$("#genre").val(),platform:$("#platform").val(),numcopies:$("#numcopies").val(),numboxed:$("#numboxed").val(),nummanuals:$("#nummanuals").val(),datepurchased:$("#datepurchased").val(),approximatepurchaseddate:$("#approximatepurchaseddate").is(":checked"),notes:$("#notes").val()}}function validateSaveGame(a){hideValidationFailure();var b="";""==a.title&&(b="Please enter a title"),""==a.numcopies&&(b=appendText(b,"Please enter a number of copies")),""==a.numboxed&&(b=appendText(b,"Please enter a number of boxes")),""==a.nummanuals&&(b=appendText(b,"Please enter a number of manuals"));var c=""==b;return c||showValidationFailure(b),c}function addHardware(){var a=getHardwareNoId();validateSaveHardware(a)&&ajaxSave("/savehardware",a)}function appendText(a,b){return""!=a&&(a+="<br />"),a+b}function updateHardware(){var a=getHardwareNoId();a.id=$("#id").val(),validateSaveHardware(a)&&ajaxSave("/updatehardware",a)}function getHardwareNoId(){return{name:$("#name").val(),platform:$("#platform").val(),numcopies:$("#numcopies").val(),numboxed:$("#numboxed").val(),notes:$("#notes").val(),hardwaretype:$("#hardwaretype").val()}}function validateSaveHardware(a){hideValidationFailure();var b="";""==a.name&&(b="Please enter a name"),""==a.numowned&&(b=appendText(b,"Please enter number owned")),""==a.numboxed&&(b=appendText(b,"Please enter number boxed"));var c=""==b;return c||showValidationFailure(b),c}function updatePlatform(){updateNameDescription("/updateplatform","/platforms")}function updateGenre(){updateNameDescription("/updategenre","/genres")}function updateHardwareType(){updateNameDescription("/updatehardwaretype","/hardwaretypes")}function updateNameDescription(a,b){var c=getIdNameDescriptionJson();validateSaveNameDescriptionJson(c)&&ajaxSave(a,c,b)}function updateUser(a){j={id:a,userid:$("#userid").val()},ajaxSave("/updateuser",j,"/users")}function getIdNameDescriptionJson(){return{id:$("#id").val(),name:$("#name").val(),description:$("#description").val()}}function validateSaveNameDescriptionJson(a){hideValidationFailure();var b="";""==a.name&&(b="Please enter a name"),""==a.description&&(b=appendText(b,"Please enter a description"));var c=""==b;return c||showValidationFailure(b),c}function ajaxSave(a,b,c){function d(){showValidationSuccess("Save Successful"),setTimeout(function(){hideValidationSuccess(),c&&navigate(c)},3e3)}function e(){showValidationFailure("Save Failed!")}$.ajax({type:"post",url:a,data:b,success:d,error:e})}function sortGames(a){var b=$("#gamesortfield"),c=$("#gamesortdir"),d=$("#gamerows"),e=c.val(),f="asc",g=null==d.val()?999999:d.val();b.val()==a&&(f=toggleSortDirection(e)),b.val(a),c.val(f),$("#games").load("/sortgames",{field:a,sortdir:f,numrows:g})}function sortHardware(a){var b=$("#hwsortfield"),c=$("#hwsortdir"),d=$("#gamerows"),e=c.val(),f="asc",g=null==d.val()?999999:d.val();b.val()==a&&(f=toggleSortDirection(e)),b.val(a),c.val(f),$("#hardware").load("/sorthardware",{field:a,sortdir:f,numrows:g})}function toggleSortDirection(a){return"asc"==a?"desc":"asc"}function setLoginText(){var a=$.cookie("user_id");$("#logintext").html("Logged in as "+a+" | <a href='logout'>(Log out)</a>")}function validateLoginForm(){var a="";return""==$("#userid").val()&&(a="Please enter a user id"),""==$("#password").val()&&(a=appendText(a,"Please enter a password")),""!==a&&showValidationFailure(a),""==a}function showValidationSuccess(a){hideValidationFailure(),showValidationMessage($("#success"),$("#successText"),a)}function hideValidationMessages(){hideValidationSuccess(),hideValidationFailure()}function hideValidationSuccess(){hideValidationBox($("#success"),$("#successText"))}function hideValidationFailure(){hideValidationBox($("#failure"),$("#failureText"))}function hideValidationBox(a,b){a.fadeOut()}function showValidationFailure(a){showValidationMessage($("#failure"),$("#failureText"),a)}function showValidationMessage(a,b,c){b.html(c),a.fadeIn()}function login(){return hideValidationMessages(),loginPageAjax("/signin")}function loginDone(a){0!=a&&("True"==a?(showValidationSuccess("Login successful."),setTimeout(function(){navigate("/")},2e3),setLoginText()):showValidationFailure("Login failed."))}function newUser(){return hideValidationMessages(),loginPageAjax("/signup")}function newUserDone(a){0!=a&&("True"==a?(showValidationSuccess("Signed up successfully"),setLoginText()):showValidationFailure("Error encountered while signing up"))}function loginPageAjax(a){if(!validateLoginForm()){var b=new $.Deferred;return b.resolve(!1),b}return $.ajax({url:a,type:"POST",data:{userid:$("#userid").val(),password:$("#password").val()}})}$(function(){var a=$.cookie("session_status");"1"==a?setLoginText():$(".authenticated-header").hide()}),$(function(){$("#login").on("click",function(){return login().done(loginDone),!1}),$("#newuser").on("click",function(){newUser().done(newUserDone)})}),$(function(){var a=$(".picker"),b=a.val();a.datepicker(),a.datepicker("option","dateFormat","dd/mm/yy"),a.val(b)});
//# sourceMappingURL=script.min.js.map