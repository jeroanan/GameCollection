function cancelEdit(){window.history.back()}function cancelEditPlatform(){navigate(urls.platforms)}function showDeleteConfirm(){$("#deleteConfirm").fadeIn()}function hideDeleteConfirm(){$("#deleteConfirm").fadeOut()}function getIdJson(){return{id:$("#id").val()}}function deleteHardwareType(){ajaxDelete(urls.deletehardwaretype,getIdJson(),urls.hardwaretypes)}function deleteGame(){ajaxDelete(urls.deletegame,getIdJson(),urls.allgames)}function deletePlatform(){ajaxDelete(urls.deleteplatform,getIdJson(),urls.platforms)}function ajaxDelete(a,b,c){function d(){showValidationSuccess("Deletion successful"),setTimeout(function(){hideValidationSuccess(),c&&navigate(c)},3e3)}function e(){showValidationFailure("Deletion failed")}$.ajax({url:a,data:b,success:d,error:e})}function deleteHardware(){ajaxDelete(urls.deletehardware,getIdJson(),urls.allhardware)}function addNewPlatform(){addNewNameDescription(addPlatform)}function addPlatform(a,b){addNameDescription(urls.addplatform,a,b)}function addNewGenre(){addNewNameDescription(addGenre)}function addHardwareType(a,b){addNameDescription(urls.addhardwaretype,a,b)}function addNewHardwareType(){addNewNameDescription(addHardwareType)}function addGenre(a,b){addNameDescription(urls.addgenre,a,b)}function addNewNameDescription(a){a($("#name").val(),$("#description").val())}function addNameDescription(a,b,c){$.ajax({url:a,data:{name:b,description:c}}).always(function(){document.location.reload()})}function deleteGenre(a){ajaxDelete(urls.deletegenre,getIdJson(),urls.genres)}function deleteUser(a){j={id:a},ajaxDelete(urls.deleteuser,j,urls.users)}function navigate(a){window.location=a}function updateGame(){var a=getGameNoId();a.id=getIdJson().id,validateSaveGame(a)&&ajaxSave(urls.updategame,a,urls.allgames)}function saveGame(){var a=getGameNoId();validateSaveGame(a)&&ajaxSave(urls.savegame,a,urls.allgames)}function getGameNoId(){return{title:$("#title").val(),genre:$("#genre").val(),platform:$("#platform").val(),numcopies:$("#numcopies").val(),numboxed:$("#numboxed").val(),nummanuals:$("#nummanuals").val(),datepurchased:$("#datepurchased").val(),approximatepurchaseddate:$("#approximatepurchaseddate").is(":checked"),notes:$("#notes").val()}}function validateSaveGame(a){hideValidationFailure();var b="";""===a.title&&(b="Please enter a title"),""===a.numcopies&&(b=appendText(b,"Please enter a number of copies")),""===a.numboxed&&(b=appendText(b,"Please enter a number of boxes")),""===a.nummanuals&&(b=appendText(b,"Please enter a number of manuals"));var c=""===b;return c||showValidationFailure(b),c}function addHardware(){var a=getHardwareNoId();validateSaveHardware(a)&&ajaxSave(urls.savehardware,a)}function appendText(a,b){return""!==a&&(a+="<br />"),a+b}function updateHardware(){var a=getHardwareNoId();a.id=getIdJson().id,validateSaveHardware(a)&&ajaxSave(urls.updatehardware,a)}function getHardwareNoId(){return{name:$("#name").val(),platform:$("#platform").val(),numcopies:$("#numcopies").val(),numboxed:$("#numboxed").val(),notes:$("#notes").val(),hardwaretype:$("#hardwaretype").val()}}function validateSaveHardware(a){hideValidationFailure();var b="";""===a.name&&(b="Please enter a name"),""===a.numowned&&(b=appendText(b,"Please enter number owned")),""===a.numboxed&&(b=appendText(b,"Please enter number boxed"));var c=""===b;return c||showValidationFailure(b),c}function updatePlatform(){updateNameDescription(urls.updateplatform,urls.platforms)}function updateGenre(){updateNameDescription(urls.updategenre,urls.genres)}function updateHardwareType(){updateNameDescription(urls.updatehardwaretype,urls.hardwaretypes)}function updateNameDescription(a,b){var c=getIdNameDescriptionJson();validateSaveNameDescriptionJson(c)&&ajaxSave(a,c,b)}function updateUser(a){j={id:a,userid:$("#userid").val()},ajaxSave(urls.updateuser,j,urls.users)}function getIdNameDescriptionJson(){return{id:getIdJson().id,name:$("#name").val(),description:$("#description").val()}}function validateSaveNameDescriptionJson(a){hideValidationFailure();var b="";""===a.name&&(b="Please enter a name"),""===a.description&&(b=appendText(b,"Please enter a description"));var c=""===b;return c||showValidationFailure(b),c}function ajaxSave(a,b,c){function d(){showValidationSuccess("Save Successful"),setTimeout(function(){hideValidationSuccess(),c&&navigate(c)},3e3)}function e(){showValidationFailure("Save Failed!")}$.ajax({type:"post",url:a,data:b,success:d,error:e})}function sortGames(a){var b=$("#gamesortfield"),c=$("#gamesortdir"),d=$("#gamerows"),e=c.val(),f="asc",g=null===d.val()?999999:d.val();b.val()==a&&(f=toggleSortDirection(e)),b.val(a),c.val(f),$("#games").load(urls.sortgames,{field:a,sortdir:f,numrows:g})}function sortHardware(a){var b=$("#hwsortfield"),c=$("#hwsortdir"),d=$("#gamerows"),e=c.val(),f="asc",g=null===d.val()?999999:d.val();b.val()==a&&(f=toggleSortDirection(e)),b.val(a),c.val(f),$("#hardware").load(urls.sorthardware,{field:a,sortdir:f,numrows:g})}function toggleSortDirection(a){return"asc"==a?"desc":"asc"}function setLoginText(){var a=$.cookie("user_id");$("#logintext").html("Logged in as "+a+" | <a href='logout'>(Log out)</a>")}function validateLoginForm(){var a="";return""===$("#userid").val()&&(a="Please enter a user id"),""===$("#password").val()&&(a=appendText(a,"Please enter a password")),""!==a&&showValidationFailure(a),""===a}function showValidationSuccess(a){hideValidationFailure(),showValidationMessage($("#success"),$("#successText"),a)}function hideValidationMessages(){hideValidationSuccess(),hideValidationFailure()}function hideValidationSuccess(){hideValidationBox($("#success"),$("#successText"))}function hideValidationFailure(){hideValidationBox($("#failure"),$("#failureText"))}function hideValidationBox(a,b){a.fadeOut()}function showValidationFailure(a){showValidationMessage($("#failure"),$("#failureText"),a)}function showValidationMessage(a,b,c){b.html(c),a.fadeIn()}function login(){return hideValidationMessages(),loginPageAjax("/signin")}function loginDone(a){a!==!1&&("True"===a?(showValidationSuccess("Login successful."),setTimeout(function(){navigate("/")},2e3),setLoginText()):showValidationFailure("Login failed."))}function newUser(){return hideValidationMessages(),loginPageAjax("/signup")}function newUserDone(a){a!==!1&&("True"==a?(showValidationSuccess("Signed up successfully"),setLoginText()):showValidationFailure("Error encountered while signing up"))}function loginPageAjax(a){if(!validateLoginForm()){var b=new $.Deferred;return b.resolve(!1),b}return $.ajax({url:a,type:"POST",data:{userid:$("#userid").val(),password:$("#password").val()}})}$(function(){var a=$.cookie("session_status");"1"==a?setLoginText():$(".authenticated-header").hide()}),$(function(){$("#login").on("click",function(){return login().done(loginDone),!1}),$("#newuser").on("click",function(){newUser().done(newUserDone)})}),$(function(){var a=$(".picker"),b=a.val();a.datepicker(),a.datepicker("option","dateFormat","dd/mm/yy"),a.val(b)}),urls={addgenre:"/addgenre",allgames:"/allgames",addhardwaretype:"/addhardwaretype",addplatform:"/addplatform",allhardware:"/allhardware",deletegame:"/deletegame",deletegenre:"/deletegenre",deletehardware:"/deletehardware",deletehardwaretype:"/deletehardwaretype",deleteplatform:"/deleteplatform",deleteuser:"/deleteuser",genres:"/genres",hardwaretypes:"/hardwaretypes",platforms:"/platforms",savegame:"/savegame",savehardware:"/savehardware",sortgames:"/sortgames",sorthardware:"/sorthardware",updategame:"/updategame",updatehardware:"/updatehardware",updatehardwaretype:"/updatehardwaretype",updateplatform:"/updateplatform",updategenre:"/updategenre",updateuser:"/updateuser",users:"/users"};
//# sourceMappingURL=script.min.js.map