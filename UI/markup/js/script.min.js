function cancelEdit(){window.history.back()}function showDeleteConfirm(){$("#deleteConfirm").fadeIn()}function hideDeleteConfirm(){$("#deleteConfirm").fadeOut()}function getIdJson(){return{id:$("#id").val()}}function ajaxDelete(a,b,c){function d(){showValidationSuccess("Deletion successful"),setTimeout(function(){hideValidationSuccess(),c&&navigate(c)},3e3)}function e(){showValidationFailure("Deletion failed")}$.ajax({url:a,data:b,success:d,error:e})}function addNewNameDescription(a){a($("#name").val(),$("#description").val())}function addNameDescription(a,b,c){$.ajax({url:a,data:{name:b,description:c}}).always(function(){document.location.reload()})}function navigate(a){window.location=a}function appendText(a,b){return""!==a&&(a+="<br />"),a+b}function updateNameDescription(a,b){function c(){return{id:getIdJson().id,name:$("#name").val(),description:$("#description").val()}}function d(a){hideValidationFailure();var b="";""===a.name&&(b="Please enter a name"),""===a.description&&(b=appendText(b,"Please enter a description"));var c=""===b;return c||showValidationFailure(b),c}var e=c();d(e)&&ajaxSave(a,e,b)}function ajaxSave(a,b,c){function d(){showValidationSuccess("Save Successful"),setTimeout(function(){hideValidationSuccess(),c&&navigate(c)},3e3)}function e(){showValidationFailure("Save Failed!")}$.ajax({type:"post",url:a,data:b,success:d,error:e})}function toggleSortDirection(a){return"asc"==a?"desc":"asc"}function setLoginText(){var a=$.cookie("user_id");$("#logintext").html("Logged in as "+a+" | <a href='logout'>(Log out)</a>")}function validateLoginForm(){var a="";return""===$("#userid").val()&&(a="Please enter a user id"),""===$("#password").val()&&(a=appendText(a,"Please enter a password")),""!==a&&showValidationFailure(a),""===a}function showValidationSuccess(a){hideValidationFailure(),showValidationMessage($("#success"),$("#successText"),a)}function hideValidationMessages(){hideValidationSuccess(),hideValidationFailure()}function hideValidationSuccess(){hideValidationBox($("#success"),$("#successText"))}function hideValidationFailure(){hideValidationBox($("#failure"),$("#failureText"))}function hideValidationBox(a,b){a.fadeOut()}function showValidationFailure(a){showValidationMessage($("#failure"),$("#failureText"),a)}function showValidationMessage(a,b,c){b.html(c),a.fadeIn()}function login(){return hideValidationMessages(),loginPageAjax("/signin")}function loginDone(a){a!==!1&&("True"===a?(showValidationSuccess("Login successful."),setTimeout(function(){navigate("/")},2e3),setLoginText()):showValidationFailure("Login failed."))}function newUser(){return hideValidationMessages(),loginPageAjax("/signup")}function newUserDone(a){a!==!1&&("True"==a?(showValidationSuccess("Signed up successfully"),setLoginText()):showValidationFailure("Error encountered while signing up"))}function loginPageAjax(a){if(!validateLoginForm()){var b=new $.Deferred;return b.resolve(!1),b}return $.ajax({url:a,type:"POST",data:{userid:$("#userid").val(),password:$("#password").val()}})}function deleteGame(){ajaxDelete(urls.deletegame,getIdJson(),urls.allgames)}function updateGame(){var a=getGameNoId();a.id=getIdJson().id,validateSaveGame(a)&&ajaxSave(urls.updategame,a,urls.allgames)}function saveGame(){var a=getGameNoId();validateSaveGame(a)&&ajaxSave(urls.savegame,a,urls.allgames)}function getGameNoId(){return{title:$("#title").val(),genre:$("#genre").val(),platform:$("#platform").val(),numcopies:$("#numcopies").val(),numboxed:$("#numboxed").val(),nummanuals:$("#nummanuals").val(),datepurchased:$("#datepurchased").val(),approximatepurchaseddate:$("#approximatepurchaseddate").is(":checked"),notes:$("#notes").val()}}function validateSaveGame(a){hideValidationFailure();var b="";""===a.title&&(b="Please enter a title"),""===a.numcopies&&(b=appendText(b,"Please enter a number of copies")),""===a.numboxed&&(b=appendText(b,"Please enter a number of boxes")),""===a.nummanuals&&(b=appendText(b,"Please enter a number of manuals"));var c=""===b;return c||showValidationFailure(b),c}function sortGames(a){var b=$("#gamesortfield"),c=$("#gamesortdir"),d=$("#gamerows"),e=c.val(),f="asc",g=null===d.val()?999999:d.val();b.val()==a&&(f=toggleSortDirection(e)),b.val(a),c.val(f),$("#games").load(urls.sortgames,{field:a,sortdir:f,numrows:g})}function deleteHardware(){ajaxDelete(urls.deletehardware,getIdJson(),urls.allhardware)}function addHardware(){var a=getHardwareNoId();validateSaveHardware(a)&&ajaxSave(urls.savehardware,a,urls.allhardware)}function updateHardware(){var a=getHardwareNoId();a.id=getIdJson().id,validateSaveHardware(a)&&ajaxSave(urls.updatehardware,a,urls.allhardware)}function getHardwareNoId(){return{name:$("#name").val(),platform:$("#platform").val(),numcopies:$("#numcopies").val(),numboxed:$("#numboxed").val(),notes:$("#notes").val(),hardwaretype:$("#hardwaretype").val()}}function validateSaveHardware(a){hideValidationFailure();var b="";""===a.name&&(b="Please enter a name"),""===a.numowned&&(b=appendText(b,"Please enter number owned")),""===a.numboxed&&(b=appendText(b,"Please enter number boxed"));var c=""===b;return c||showValidationFailure(b),c}function sortHardware(a){var b=$("#hwsortfield"),c=$("#hwsortdir"),d=$("#gamerows"),e=c.val(),f="asc",g=null===d.val()?999999:d.val();b.val()==a&&(f=toggleSortDirection(e)),b.val(a),c.val(f),$("#hardware").load(urls.sorthardware,{field:a,sortdir:f,numrows:g})}$(function(){var a=$.cookie("session_status");"1"==a?setLoginText():$(".authenticated-header").hide()}),$(function(){$("#login").on("click",function(){return login().done(loginDone),!1}),$("#newuser").on("click",function(){newUser().done(newUserDone)})}),$(function(){var a=$(".picker"),b=a.val();a.datepicker(),a.datepicker("option","dateFormat","dd/mm/yy"),a.val(b)}),urls={addgenre:"/addgenre",allgames:"/allgames",addhardwaretype:"/addhardwaretype",addplatform:"/addplatform",allhardware:"/allhardware",deletegame:"/deletegame",deletegenre:"/deletegenre",deletehardware:"/deletehardware",deletehardwaretype:"/deletehardwaretype",deleteplatform:"/deleteplatform",deleteuser:"/deleteuser",genres:"/genres",hardwaretypes:"/hardwaretypes",platforms:"/platforms",savegame:"/savegame",savehardware:"/savehardware",sortgames:"/sortgames",sorthardware:"/sorthardware",updategame:"/updategame",updatehardware:"/updatehardware",updatehardwaretype:"/updatehardwaretype",updateplatform:"/updateplatform",updategenre:"/updategenre",updateuser:"/updateuser",users:"/users"};var Hardware=function(a,b){this.ajax=a,this.urls=b};Hardware.prototype.getHardwareNoId=function(){return{name:$("#name").val(),platform:$("#platform").val(),numcopies:$("#numcopies").val(),numboxed:$("#numboxed").val(),notes:$("#notes").val(),hardwaretype:$("#hardwaretype").val()}},Hardware.prototype.deleteHardware=function(){this.ajax.ajaxDelete(urls.deletehardware,this.ajax.getIdJson(),urls.allhardware)};var Ajax=function(){};Ajax.prototype.sendAjax=function(a,b,c,d){var e={url:url,data:{name:name,description:description}};c&&(e.success=c),d&&(e.error=d),$.ajax()},Ajax.prototype.addNameDescription=function(a,b,c){var d={name:b,description:c};this.sendAjax(a,d)},Ajax.prototype.addNewNameDescription=function(a){a($("#name").val(),$("#description").val())},Ajax.prototype.ajaxDelete=function(a,b,c){this.sendAjax(a,b,this.deletionSuccessful,this.deletionFailed)},Ajax.prototype.deletionSuccessful=function(a){this.showValidationSuccess("Deletion successful"),setTimeout(function(){this.hideValidationSuccess(),successUri&&navigate(successUri)},3e3)},Ajax.prototype.deletionFailed=function(){this.showValidationFailure("Deletion failed")},Ajax.prototype.getIdNameDescriptionJson=function(){return{id:this.getIdJson().id,name:$("#name").val(),description:$("#description").val()}},Ajax.prototype.validateSaveNameDescriptionJson=function(a){this.hideValidationFailure();var b="";""===a.name&&(b="Please enter a name"),""===a.description&&(b=this.appendText(b,"Please enter a description"));var c=""===b;return c||this.showValidationFailure(b),c},Ajax.prototype.appendText=function(a,b){return""!==a&&(a+="<br />"),a+b},Ajax.prototype.updateNameDescription=function(a,b){var c=this.getIdNameDescriptionJson();this.validateSaveNameDescriptionJson(c)&&this.ajaxSave(a,c,b)},Ajax.prototype.getIdJson=function(){return{id:$("#id").val()}},Ajax.prototype.ajaxSave=function(a,b,c){function d(){this.showValidationSuccess("Save Successful"),setTimeout(function(){this.hideValidationSuccess(),c&&navigate(c)},3e3)}function e(){this.showValidationFailure("Save Failed!")}$.ajax({type:"post",url:a,data:b,success:d,error:e})},Ajax.prototype.hideValidationBox=function(a){a.fadeOut()},Ajax.prototype.hideValidationFailure=function(){this.hideValidationBox($("#failure"))},Ajax.prototype.showValidationFailure=function(a){this.showValidationMessage($("#failure"),$("#failureText"),a)},Ajax.prototype.showValidationMessage=function(a,b,c){b.html(c),a.fadeIn()},Ajax.prototype.hideValidationSuccess=function(){this.hideValidationBox($("#success"))},Ajax.prototype.showValidationSuccess=function(){this.hideValidationFailure(),this.showValidationMessage($("#success"),$("#successText"),successText)};
//# sourceMappingURL=script.min.js.map