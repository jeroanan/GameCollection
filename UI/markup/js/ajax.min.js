var Ajax=function(){};Ajax.prototype.sendAjax=function(a,b,c,d){var e=$.Deferred(),f={url:a,data:b,type:"POST"};return c&&(f.success=c),d&&(f.error=d),$.ajax(f).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e},Ajax.prototype.loadAjax=function(a,b,c,d){$(a).load(b,c,d)},Ajax.prototype.addNameDescription=function(a,b,c){var d=$.Deferred(),e={name:b,description:c};return this.sendAjax(a,e).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},Ajax.prototype.addNewNameDescription=function(a){var b=$.Deferred();return a($("#name").val(),$("#description").val()).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},Ajax.prototype.ajaxDelete=function(a,b,c){var d=$.Deferred(),e=this;return this.sendAjax||(e=new Ajax),e.sendAjax(a,b,this.deletionSuccessful,this.deletionFailed).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},Ajax.prototype.deletionSuccessful=function(a){var b=this;this.showValidationSuccess||(b=new Ajax),b.showValidationSuccess("Deletion successful"),setTimeout(function(){b.hideValidationSuccess(),a&&navigate(a)},3e3)},Ajax.prototype.deletionFailed=function(){this.showValidationFailure("Deletion failed")},Ajax.prototype.getIdNameDescriptionJson=function(){return{id:this.getIdJson().id,name:$("#name").val(),description:$("#description").val()}},Ajax.prototype.validateSaveNameDescriptionJson=function(a){var b=[];return a.name||b.push("name"),a.description||b.push("description"),{result:0===b.length?"ok":"fail",fields:b}},Ajax.prototype.appendText=function(a,b){return""!==a&&(a+="<br />"),a+b},Ajax.prototype.updateNameDescription=function(a,b){var c=$.Deferred(),d=this.getIdNameDescriptionJson(),e=this.validateSaveNameDescriptionJson(d);return"ok"===e.result?this.ajaxSave(a,d).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}):c.reject({fields:e.fields}),c},Ajax.prototype.getIdJson=function(){return{id:$("#id").val()}},Ajax.prototype.ajaxSave=function(a,b,c){function d(){return this.showValidationSuccess?this:new Ajax}function e(){var a=d();a.showValidationSuccess("Save Successful"),setTimeout(function(){a.hideValidationSuccess(),c&&navigate(c)},3e3)}function f(){var a=d();a.showValidationFailure("Save Failed!")}var g=$.Deferred();return this.sendAjax(a,b).done(function(a){e(),g.resolve(a)}).fail(function(a){f(),g.reject(a)}),g},Ajax.prototype.hideValidationBox=function(a){a.fadeOut()},Ajax.prototype.hideValidationFailure=function(){this.hideValidationBox($("#failure"))},Ajax.prototype.showValidationFailure=function(a){this.showValidationMessage($("#failure"),$("#failureText"),a)},Ajax.prototype.showValidationMessage=function(a,b,c){b.html(c),a.fadeIn()},Ajax.prototype.hideValidationSuccess=function(){this.hideValidationBox($("#success"))},Ajax.prototype.showValidationSuccess=function(a){this.hideValidationFailure(),this.showValidationMessage($("#success"),$("#successText"),a)},Ajax.prototype.setLoginText=function(){var a=$.cookie("user_id");$("#logintext").html("Logged in as "+a+" | <a href='logout'>(Log out)</a>")},Ajax.prototype.hideValidationMessages=function(){this.hideValidationSuccess(),this.hideValidationFailure()},Ajax.prototype.validateNameDescription=function(a){var b=[];return a.name&&""!==a.name.trim()||b.push("name"),a.description&&""!==a.description.trim()||b.push("description"),{result:0===b.length?"ok":"fail",fields:b}};
//# sourceMappingURL=script.min.js.map